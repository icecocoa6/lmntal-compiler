//Semaphore example

//Make new semaphore
{mv(sem), sem.new(sem1)}.
{
	{mv(sem), sem.up(sem1), handle(X)}. res(X).
	res(X),{shrink(X),allowed} :- state1.
	state1 :- io.print([[Critical A 1]]), state2.
	state2 :- io.print([[Critical A 2]]), {mv(sem), sem.down(sem1)}.
}.
{
	{mv(sem), sem.up(sem1), handle(X)}. res(X).
	res(X),{shrink(X),allowed} :- state1.
	state1 :- io.print([[Critical B 1]]), state2.
	state2 :- io.print([[Critical B 2]]), {mv(sem), sem.down(sem1)}.
}.

