{
	thread.create(4).
	thread.all({norm(0)}).
	generate(10000).
	gen@@
		generate(X) :- X>0,Y=X-1,MOD=X mod 4 | at(MOD, integer.rnd(100)), generate(Y).
	all@@
		go :- thread.all({cal@@ norm(Y), n(X) :- int(X),Z=X*X+Y | norm(Z)}).
	at@@
		at(N,M) :- int(M) | thread.at(N,{n(M)}).
	norm@@
		norm(N), norm(M) :- norm(N+M).
}.

bench@@
	{generate(0),$p,@p} :-timer:benchmark(X,"Elapsed Time"), {+(X),$p,@p}.