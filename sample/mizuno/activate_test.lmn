//※修正済※
//-O オプションを使うと、すでに膜スタックに積まれている場合に
//仮スタックに積むべき場合でも何もしていない事による問題が起きていた。
//
//-O オプションを使わないと、$p のタスク間移動時に移動前のタスクの実行膜スタックから
//除去されていない事による問題がおきていた。

gen.
gen @@ gen :-
	{do.
		{{a.
		 a :- b, [:/*inline*/try{Thread.sleep(1000);}catch(Exception e){}:].
		 b :- c.
		}}
	}@"localhost".

//-O オプションを使った場合、ルート膜は膜スタックに積まれているので、仮スタックに積まれない。
//そのため、新規に作成した膜が膜スタックの先頭に積まれてしまい、完全な検査が行われない。
//-O オプションを使わなかった場合、ルートタスクに移動される。
//しかし、子タスクの膜スタックに残ったままなので、検査順序が入れ替わり、完全な検査が行われない。
do @@ {do,{$p}} :- {{{$p. {c,$q[],@q}:-ok.}}}.
