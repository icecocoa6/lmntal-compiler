{client1.
c(in,["d11","d12","d13","d14"],C1).
}.
{client2.
c(in,["d21","d22","d23","d24"],C2).
}.

{server.
c(I1,O1,C1).
c(I2,O2,C2).
merge(I1,I2,S).
cp(S,O1,O2).

O=merge([D|I1],I2) :- O=[D|merge(I1,I2)].
O=merge(I1,[D|I2]) :- O=[D|merge(I1,I2)].
cp([D|I],O1,O2) :- unary(D) | O1=[D|OO1], O2=[D|OO2], cp(I,OO1,OO2).
}.

#通信処理
{c(I1,[D|O1],C),$p1[I1,O1|*V1],@p1}, {c(I2,O2,C),$p2[I2,O2|*V2],@p2}
	:- string(D) | {c(I1,O1,C),$p1[I1,O1|*V1],@p1}, {c(II2,O2,C),I2=[D|II2],$p2[I2,O2|*V2],@p2}.