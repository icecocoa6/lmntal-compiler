% josephus problem

res = j(5, p(gen(30, X), X)).

del([H|T]) :- int(H) | del(T).

gen(0, L, R) :- L=R.
gen(N, L, R) :- N=\=0,M=N-1 | R=n(N, gen(M, L)).

j(N, p(n(X,A),B), R) :- j(N, 0, p(n(X,A),B), R).
j(N, p(A,A), R) :- int(N) | R=[].

j(N, M, p(n(X,A),B), R) :- N=:=M | R=[X|j(N, p(A,B))].
j(N, M, p(n(X,A),B), R) :- N=\=M,O=M+1 | j(N, O, p(A,L), R), n(X,L,B).
