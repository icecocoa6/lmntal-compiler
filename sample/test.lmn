%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% - 構文解析器のテスト

a(-3.14* .14E-04+ -5)

p(10-6-3.14* -3.14)

p("a\"\\b")

p('a''b')

#'A' % ==> 65【未実装】

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% - 基本テスト

append(c(1,c(2,c(3,n))),c(4,c(5,n)),result), ( append(X,Y,Z), n(X) :- Y=Z ), ( append(X,Y,Z), c(A,X1,X) :- c(A,Z1,Z), append(X1,Y,Z1) )

p([1,2,3|X],[4,5],[],result(X))

[[/*inline*/System.out.println(me.nth(0));]]("Linked\n\tMultisets of\n\t\tNodes")

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% - 単一化 = のテスト

p(X,X)
p(X,Y),Y=X % ==> p(X,X)
X=X        % ==> ()
X=Y,Y=X    % ==> ()
[1]=res    % ==> res([1])
X=[1|X]

p(a,b), ( p(X,Y)     :- X=Y     ) % ==> a(b)
p(a,b), ( Y=p(X)     :- X=Y     ) % ==> a(b)
p(a,b), ( Y=E,E=p(X) :- X=F,F=Y ) % ==> a(b)

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% - 自由リンク管理アトムのテスト

% 生成のテスト
b(X),{c(X)}
% マッチングのテスト
b(X),{c(X)}, (b(X),{c(X)}:- ok) % ==> ok
% 生成とマッチングのテスト
a, (a:-b(X),{c(X)}), (b(X),{c(X)}:-d(Y),{e(Y)}) % ==> d(X),{e(X)}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% - プロセス文脈のテスト

1,1,1,1,1,{},({$p},1:-{$p,1}) % ==> {1,1,1,1,1}
{{a(X)},b(X,Y),1},{c(Y)}, ({$p,1} :- {$p}) % ==> {{a(X)},b(X,Y)},{c(Y)}

% RemoveProxies のテスト
{{a(X)},b(X,Y)},{c(Y)},      ({$p},{$q} :- {$p,$q}) % ==> {{a(X)},c(b(X))}
% RemoveToplevelProxies のテスト
{a(  X)},{b(X)},             ({$p},{$q} :- $p,$q) % ==> a(b)
{a(A,X)},{b(X)},c(A),        ({$p},{$q} :- $p,$q)

% InsertProxies のテスト
{{a(A,X)},b(B,X)},c(A,B), ({{$p},$q} :- {$p,$q}) %

% 全般
{{a(A,X)},b(B,X)},{d(B)},c(A),  ( {{$p},$q},{$r}   :- {{$p},$q,  $r} ) % ==> {{a(A,X)},b(d,X)},c(A)
{{a(A,X)},b(B,X)},{d(B)},c(A),a,( {{$p},$q},{$r},a :- {{$p},$q},{$r} ) % ==> {{a(A,X)},b(B,X)},{d(B)},c(A)
{{a(A,X)},b(B,X)},{d(B)},c(A),  ( {{$p},$q},{$r}   :- {$p,$q,$r}     ) % ==> {a(X,b(d))},c(X)
{{a(A,X)},b(B,X)},{d(B)},c(A),  ( {{$p},$q},{$r}   :-  $p,$q,$r      ) % ==> a(c)=b(d)

{{a(X)},b(X)},               ({{$p},$q} :- $p,$q) % ==> a(b)
{{a(X)},b(X,Y)}, c(Y),       ({{$p},$q} :- $p,$q) % ==> c(b(a))
{{a(A,X)},b(B,X)},1(A),2(B), ({{$p},$q} :- $p,$q) % ==> a(1)=b(2)

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% - システムルールセットのテスト

{p(X,Y), (p(X,Y) :- X=Y)}, a(X,Y) % ==>  a(X,X), {}
{a(X,Y)}, p(X,Y), (p(X,Y) :- X=Y) % ==> {a(X,X)}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% - 組み込み機能のテスト

p((123+45-67+89)/(10*10)) % ==> 1 % (1.9)
cp(4+5,B,C), res(B*C)     % ==> res(81)
p(2/0)                    % ==> p('NaN')
p(2 mod 0)                % ==> p('NaN')【未実装】

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% - ガードのテスト

(a($p) :- int($p) | b($p))

(a(X) :- int(X)      | b(X),c(X))

(a(X) :- int(X)      | b(X),c(X)), a(4)      % ==> b(4),c(4)

(a(X) :- 4(X),4(X)   | end(X)),    a(4),a(5) % ==> end(4),a(5)

(a    :- 4(X),4(X)   | end(X)),    a         % ==> end(4)

(a(X) :- 4(X),int(X) | end(X)),    a(4)      % ==> end(4)

(a(X,Y) :- X<Y | ok(X,Y)), a(3,4), a(3,3), a(3,2) % ==> ok(3,4), a(3,3), a(3,2)

(a(X) :- X=4         | end(X)),    a(4),a(5) % ==> end(4),a(5)

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

(sum([],S) :- S=0),(sum([A|Xs],S):-S=A+sum(Xs)),sum([1,2,3,4,5])=print

(gen(K,N,Xs) :- K=N | Xs=[]),(gen(K,N,Xs) :- K<N | Xs=[K|gen(K+1,N)]), gen(3,8)=print

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%