/**
 * 生産者はブロックされない
 */
{
module(simpleBuffer).
H=simpleBuffer.new :- H={}.
H=put({$p}, S) :- H={put(S), $p}.
H=get({put(S), $p}, Res) :- H={$p}, Res=S.
}.

B1=oo.ref(simpleBuffer.new, B2).

b=put(put(put(B1, 1), 2), 3).
b=get(get(get(B2, x), y), z).