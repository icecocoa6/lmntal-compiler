/*
 * parser  by INUI
 *
 * Interaction Netsの例題
 * 定数の畳み込みをしてみました。
 *
 * expression: + expression expression
 *           | 1
 * 
 * Special thanks to KUDO
 *
 */
 
//parse('+'(1(1(x))), u, y).
parse('*'('+'(1(1('+'(1(1(x))))))), u, y).

parse('*'(X), U, Y) :- '*'(parse(X, A), parse(A, Y), U).
parse('+'(X), U, Y) :- '+'(parse(X, A), parse(A, Y), U).
parse(1(X), Y, Z) :- 1(Z), X=Y.
parse(2(X), Y, Z) :- 2(Z), X=Y.

//'+'(A, B, X) :- int(A), int(B) | X=A+B.	//定数の畳み込み