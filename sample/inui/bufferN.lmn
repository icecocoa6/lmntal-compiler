/**
 * N個まで順不同でputできるbuffer
 */
{module(bufferN).
new@@
H=bufferN.new(N) :- N = 0 | H={}.
new@@
H=bufferN.new(N) :- N > 0 | H=token(bufferN.new(N-1)).
put@@
H=put({token, $p}, O) :- H={value(O), $p}.
get@@
H=get({value(O), $p}, Res) :- H={token, $p}, Res=O.
token@@
H=token({$p}) :- H={token, $p}.
}.
