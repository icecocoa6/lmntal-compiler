/* generate a multiset {1,...,N} */
{gen(N), $p, @p} :- N = 0 | {$p, @p}.
{gen(N), $p, @p} :- N > 0 | {num(N), gen(N-1), $p, @p}.

/* fact(n)                */
/* R(x,y) = true          */
/* A(x,y) = {x*y}         */
/*                        */
{num(X), num(Y), $p, @p} :- int(X), int(Y) | {num(X*Y), $p, @p}.

{gen(5)}.