({mv($m1),$p,@q},{name($m2),$r,@s}:-$m1=$m2|{name($m2),$p,@q,$r,@s}).
({{mv($m),$p,@q},$r,@s}:-unary($m)|{$r,@s},{mv($m),$p,@q}).
({find_and_link($m1,X),ready($m2), $p, @q}:-$m1=$m2|{$m2=X, $p, @q}).

{
	print(X).
	{ mv(m). find_and_link(m_incr, X). }.
}.
{name(m).m_incr(ready)}.

