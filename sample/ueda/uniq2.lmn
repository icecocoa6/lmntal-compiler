multisetrule{
//  elem(a), elem(b), elem(c), elem(c), elem(b), elem(c).
  elem($p) :- uniq($p) | uniq_elem($p)
}.

multiset{$p[],@p}/ :-
  set{
    $p[].
    elem($q) :- ground($q) |.
  }.

test({elem(a), elem(b), elem(c), elem(c), elem(b), elem(c)}).
test({elem(a), elem(b), elem(c), elem(c), elem(b), elem(c)}).

test({$s}), multisetrule{@r} :- multisetrule{@r}, multiset{$s,@r}.

