% robin.lmn
%    2009.06.10
%
%  Round-Robin Scheduling
%      from Maude

n(5).
n(N) :- int(N) | m(N), proc_num(N).
m(N) :- N>0, N2=N-1 | {cid(N2), mode=wait}, m(N2).
m(0) :- go(0) .

enter @@ {cid(C), mode=wait}, go(G) :- int(C),int(G) | {cid(C), mode=crit}.
exit_ @@ {cid(C), mode=crit}, proc_num(P) :- int(C), G=(C+1) mod P |
         {cid(C), mode=wait}, proc_num(P), go(G).