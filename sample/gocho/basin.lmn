% basin.lmn
%    2009.06.02
%
%     The Three Basin Puzzle


basin(3,0), basin(5,0), basin(8,0).

empty @@ basin(M,N) :- int(N) | basin(M,0).
fill_ @@ basin(M,N) :- int(N),int(M) | basin(M,M).
trsf1 @@ basin(M1,N1), basin(M2,N2) :- N=N1+N2, N=<M2 |
         basin(M1,0), basin(M2,N).
trsf2 @@ basin(M1,N1), basin(M2,N2) :- N=N1+N2, N>M2, Q=N-M2 |
         basin(M1,Q), basin(M2,M2).